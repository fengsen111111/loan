"use strict";const t=require("../../common/vendor.js"),e=require("../../common/assets.js");if(!Array){t.resolveComponent("u-icon")()}Math||(a+(()=>"../../node-modules/uview-plus/components/u-icon/u-icon.js"))();const a=()=>"../../components/navbar.js",s=t.defineComponent({__name:"index",props:{id:{type:String},title:{type:String}},setup(a){const{appContext:s}=t.getCurrentInstance(),o=s.config.globalProperties;t.index.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});const n=a,u=t.reactive({appType:t.index.getStorageSync("appType"),list:[],search_type:"name",search_name:"选择按姓名",search_word:"",pub_picker:!1,pub_value:[],column:[{name:"选择按姓名",value:"name"},{name:"选择按证件号",value:"card_number"},{name:"选择按手机号",value:"mobile"},{name:"选择按合同编号",value:"contract_num"}],page:1,pageSize:10,total:0,status_type:{a:{color:"#FF8177",name:"待提交"},b:{color:"#F97E39",name:"待审核"},c:{color:"#FF8177",name:"待签约"},d:{color:"#FF8177",name:"公证中"},e:{color:"#FF8177",name:"待放款"},g:{color:"#109181",name:"流程完结"},f:{color:"#FF8177",name:"转债中"},z:{color:"#FF3030",name:"合同作废"}},notarization_status:{a:{color:"#FF8177",name:"公证未提交"},b:{color:"#FF8177",name:"公证中"},c:{color:"#109181",name:"审核完成"},d:{color:"#109181",name:"已下证"},z:{color:"#FF3030",name:"公证异常"}}});t.onMounted((()=>{r(1)}));const r=e=>{1===e&&(u.page=1),t.index.showLoading({title:"请稍后"}),o.$request("/loan/Order/getOrderList",{currentPage:u.page,perPage:u.pageSize,user_type:"2"==t.index.getStorageSync("appType")?"b":"a",loan_type_id:n.id,search_type:u.search_type,search_data:u.search_word}).then((e=>{u.total=e.data.count,1===u.page?u.list=e.data.list:u.list=u.list.concat(e.data.list),t.index.hideLoading()}))},l=t=>{u.pub_value=t.detail.value},c=e=>{t.index.navigateTo({url:"/pages/web_view/index?url="+encodeURIComponent(e)})};return t.onReachBottom((()=>{u.page+1<=Math.ceil(u.total/u.pageSize)&&(u.page++,r(2))})),(a,s)=>t.e({a:t.p({title:n.title}),b:t.t(u.search_name),c:t.p({name:"arrow-down",size:"3vw",color:"#666666"}),d:t.o((t=>u.pub_picker=!0)),e:t.p({name:"search",size:"5vw",color:"#666666"}),f:u.search_word,g:t.o((t=>u.search_word=t.detail.value)),h:t.o((t=>r(1))),i:t.f(u.list,((e,s,n)=>t.e({a:t.t(e.name),b:t.s("person"===e.type?"max-width:15vw;min-width:14vw;width:fit-content":"max-width:40vw;min-width:17vw;width:fit-content"),c:t.t("person"===e.type?a.$cardUtil(e.card_number):""),d:"Y"==e.delete_status},"Y"==e.delete_status?t.e({e:"b"==e.status||"c"==e.status||"e"==e.status},"b"==e.status||"c"==e.status||"e"==e.status?{}:{f:t.t(u.status_type[e.status].name),g:"solid 1px "+u.status_type[e.status].color,h:u.status_type[e.status].color}):{i:t.t(u.status_type[e.status].name),j:"solid 1px "+u.status_type[e.status].color,k:u.status_type[e.status].color},{l:"d"===e.status||"e"===e.status||"f"===e.status||"g"===e.status},"d"===e.status||"e"===e.status||"f"===e.status||"g"===e.status?{m:t.t(u.notarization_status[e.notarization_status].name),n:"solid 1px "+u.notarization_status[e.notarization_status].color,o:u.notarization_status[e.notarization_status].color}:{},{p:"413355f2-3-"+n,q:t.o((a=>(e=>{let a="person"===e.type?1:2;"a"===e.status?t.index.navigateTo({url:"/home_packages/details/index?id="+e.goods_id+"&order_id="+e.id+"&type="+a}):t.index.navigateTo({url:"/mine_packages/order_detail/index?id="+e.id+"&type="+a+"&goods_name="+e.goods_name})})(e)),s),r:t.t(e.goods_name),s:t.t("person"===e.type?"个人":"企业"),t:t.s("person"===e.type?"background: #FF8177;":"background: #F3A469;"),v:t.t(e.contract_num),w:"Y"!==e.delete_status},"Y"!==e.delete_status?t.e({x:"Y"===e.open_ll_status&&"b"==e.ll_account_status&&"c"==e.jump_pass_status},"Y"===e.open_ll_status&&"b"==e.ll_account_status&&"c"==e.jump_pass_status?{y:t.o((a=>{return s=e.id,void o.$request("/loan/Order/jumpPass",{order_id:s}).then((e=>{t.index.showModal({title:"提示",content:e.data.jump_url,confirmText:"复制",success:function(a){a.confirm?(console.log("用户点击确定"),t.index.setClipboardData({data:e.data.jump_url,success:()=>{t.index.showToast({title:"复制成功"})}})):a.cancel&&console.log("用户点击取消")}})}));var s}),s)}:{}):{},{z:t.t(e.create_time),A:"Y"!==e.delete_status},"Y"!==e.delete_status?t.e({B:("b"===e.status||"c"===e.status)&&"Y"===e.open_ll_status&&2===u.appType&&"a"==e.ll_account_status},"b"!==e.status&&"c"!==e.status||"Y"!==e.open_ll_status||2!==u.appType||"a"!=e.ll_account_status?{}:{C:t.o((t=>c(e.open_ll_account_url)),s)},{D:("b"===e.status||"c"===e.status)&&"Y"===e.open_ll_status&&2===u.appType&&"c"==e.ll_account_status},"b"!==e.status&&"c"!==e.status||"Y"!==e.open_ll_status||2!==u.appType||"c"!=e.ll_account_status?{}:{E:t.o((a=>{return s=e.open_ll_account_url,void t.index.showToast({title:s,duration:2e3,icon:"none"});var s}),s)},{F:"a"!==e.status&&"b"!==e.status&&"c"!==e.status&&"Y"===e.open_ll_status&&1===u.appType&&"b"==e.ll_account_status},"a"!==e.status&&"b"!==e.status&&"c"!==e.status&&"Y"===e.open_ll_status&&1===u.appType&&"b"==e.ll_account_status?{G:t.o((t=>c(e.manage_ll_account_url)),s)}:{}):{},{H:s}))),j:t.p({name:"arrow-right",size:"4vw",color:"#666666"}),k:0===u.list.length},0===u.list.length?{l:e._imports_0$5}:{},{m:u.pub_picker},u.pub_picker?{n:t.o((t=>u.pub_picker=!1)),o:t.o((t=>(u.search_type=u.column[u.pub_value[0]].value,u.search_name=u.column[u.pub_value[0]].name,void(u.pub_picker=!1)))),p:t.f(u.column,((e,a,s)=>({a:t.t(e.name),b:a}))),q:u.pub_value,r:t.o(l)}:{},{s:u.pub_picker},u.pub_picker?{t:t.o((t=>u.pub_picker=!1))}:{})}});wx.createPage(s);
