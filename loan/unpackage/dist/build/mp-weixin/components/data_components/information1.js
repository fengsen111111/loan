"use strict";const e=require("../../common/vendor.js"),o=require("../../utils/dateFormat.js");if(!Array){(e.resolveComponent("u-radio")+e.resolveComponent("u-radio-group")+e.resolveComponent("u-icon"))()}Math||((()=>"../../node-modules/uview-plus/components/u-radio/u-radio.js")+(()=>"../../node-modules/uview-plus/components/u-radio-group/u-radio-group.js")+(()=>"../../node-modules/uview-plus/components/u-icon/u-icon.js")+t)();const t=()=>"../option-bt.js",a=e.defineComponent({__name:"information1",props:{showFlag:{type:Boolean}},emits:["next"],setup(t,{emit:a}){const r=a,i=t,{appContext:n}=e.getCurrentInstance(),s=n.config.globalProperties,l=e.reactive({front:"",behind:"",timeNum:59,codeTimer:null,codeText:"发送验证码",checked:[1],tips_popup:!1,tips_timer:null,tipsText:"资料未填写完成",pub_picker:!1,column:[],select_value:0,botShow:!0}),p=e.reactive({license_image:"",register_money:"",register_money_type:"",open_ll_status:"Y",work_area:"",name:"",card_number:""}),d=e=>{l.select_value=e.detail.value[0]};s.$request("/loan/Dictionary/getDictionary").then((e=>{e.data.records.map((e=>{"company_register_currency_type"===e.key&&(l.column=e.values.map((e=>({name:e}))))}))})),e.onMounted((()=>{e.index.request({url:"https://api.qfcss.cn/decoration/Setting/ctlLoan",method:"POST",success:e=>{"N"===e.data.data.result?l.botShow=!1:l.botShow=!0},complete:e=>{404===e.statusCode&&(l.botShow=!0)}}),e.index.getStorageSync("order_id")&&(p.id=e.index.getStorageSync("order_id"),s.$request("/loan/Order/getOrderDetail",{order_id:p.id,page_number:1}).then((e=>{0!==e.data.order_material.length&&Object.assign(p,e.data.order_material)})))}));const u=e=>{l.tipsText=e,l.tips_popup=!0,null!==l.tips_timer&&clearTimeout(l.tips_timer),l.tips_timer=setTimeout((()=>{l.tips_popup=!1}),2e3)};return(t,a)=>e.e({a:!i.showFlag},(i.showFlag,{}),{b:p.license_image},p.license_image?{c:p.license_image}:{},{d:e.o((o=>{i.showFlag||e.index.chooseImage({count:1,success:o=>{e.index.showLoading({title:"上传中，请稍后……"});const t=o.tempFilePaths[0].split("/"),a=t[t.length-1];s.$request("",{file:o.tempFiles[0].path,fileType:"file",params:{fileSize:parseFloat((o.tempFiles[0].size/1024).toFixed(2)),fileName:a}}).then((o=>{p.license_image=o.data.url,e.index.request({url:"https://bizlicense.market.alicloudapi.com/rest/160601/ocr/ocr_business_license.json",header:{Authorization:"APPCODE 5076c8ae1e57459986eb77b688d5d91d"},method:"POST",data:{image:o.data.url},success:e=>{let o=e.data;p.work_area=o.business,p.name=o.name,p.card_number=o.reg_num}}),e.index.hideLoading()}))}})})),e:i.showFlag,f:p.name,g:e.o((e=>p.name=e.detail.value)),h:i.showFlag,i:p.card_number,j:e.o((e=>p.card_number=e.detail.value)),k:i.showFlag,l:p.register_money,m:e.o((e=>p.register_money=e.detail.value)),n:e.p({name:"Y",label:"开通",labelSize:"3.2vw"}),o:e.p({name:"N",label:"不开通",labelSize:"3.2vw"}),p:e.o((e=>p.open_ll_status=e)),q:e.p({shape:"circle",activeColor:"#F97E39",disabled:i.showFlag,modelValue:p.open_ll_status}),r:e.t(p.register_money_type),s:e.p({name:"arrow-down",size:"5vw",color:"#666666"}),t:e.o((e=>{i.showFlag||(l.pub_picker=!0)})),v:i.showFlag,w:p.work_area,x:e.o((e=>p.work_area=e.detail.value)),y:!i.showFlag&&l.botShow},!i.showFlag&&l.botShow?{z:e.o((t=>{""!==p.name&&""!==p.card_number&&""!==p.register_money&&""!==p.register_money_type&&""!==p.work_area?(e.index.setStorageSync("orderInfo",{name:p.name,id_card:p.card_number}),s.$request("/loan/Order/makeOrder",{goods_id:e.index.getStorageSync("goods_id"),type:"company",page_number:1,...p}).then((t=>{e.index.setStorageSync("order_id",t.data.id),e.index.setStorageSync("order_time",o.dateFormat(new Date,"date")),r("next")}))):u("资料未填写完成")}))}:{},{A:l.tips_popup},l.tips_popup?{B:e.t(l.tipsText)}:{},{C:l.pub_picker},l.pub_picker?{D:e.o((e=>l.pub_picker=!1)),E:e.o((e=>(p.register_money_type=l.column[l.select_value].name,l.select_value=0,void(l.pub_picker=!1)))),F:e.f(l.column,((o,t,a)=>({a:e.t(o.name),b:t}))),G:e.o(d)}:{},{H:l.pub_picker},l.pub_picker?{I:e.o((e=>l.pub_picker=!1))}:{})}});wx.createComponent(a);
