"use strict";const e=require("../../common/vendor.js");if(!Array){e.resolveComponent("u-icon")()}Math;const t=e.defineComponent({__name:"index",props:{name:{type:String}},setup(t){const n=e.reactive({navigationBarHeight:0,ctx:null,points:[],clearFlag:!1});e.onMounted((()=>{e.index.getSystemInfo({success:()=>{const t=e.index.getMenuButtonBoundingClientRect();n.navigationBarHeight=t.height+2*t.top}})})),n.ctx=e.index.createCanvasContext("autograph",this),n.ctx.lineWidth=8,n.ctx.lineCap="round",n.ctx.lineJoin="round";const a=e=>{let t={X:e.changedTouches[0].x,Y:e.changedTouches[0].y};n.points.push(t),n.ctx.beginPath()},o=e=>{let t={X:e.changedTouches[0].x,Y:e.changedTouches[0].y};n.points.push(t),n.points.length>=2&&c()},i=()=>{n.points=[],n.clearFlag=!1},c=()=>{let e=n.points[0],t=n.points[1];n.points.shift(),n.ctx.moveTo(e.X,e.Y),n.ctx.lineTo(t.X,t.Y),n.ctx.stroke(),n.ctx.draw(!0)},s=t,r=()=>{e.index.navigateBack({fail:()=>{console.log("返回首页"),e.index.switchTab({url:"/pages/home/index"})}})};return(t,c)=>({a:e.o((e=>r())),b:e.p({name:"arrow-left",size:"5vh",color:"#333333"}),c:n.navigationBarHeight+"px",d:e.t(s.name),e:40*s.name.length+"vh",f:e.o(a),g:e.o(o),h:e.o(i),i:e.o((t=>(n.clearFlag=!0,void e.index.createSelectorQuery().select("#signature").boundingClientRect((e=>{n.ctx.clearRect(0,0,e.width,e.height),n.ctx.draw(!0)})).exec()))),j:e.o((t=>{e.index.canvasToTempFilePath({canvasId:"autograph",success:t=>{if(n.clearFlag)return e.index.setStorageSync("autograph","empty"),void r();e.index.setStorageSync("autograph",t.tempFilePath),r()}})})),k:"calc(100vh - "+n.navigationBarHeight+"px - 2vw - 6vh)"})}});wx.createPage(t);
