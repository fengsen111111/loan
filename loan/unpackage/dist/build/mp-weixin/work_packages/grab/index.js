"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js");if(!Array){e.resolveComponent("u-icon")()}Math||(t+(()=>"../../node-modules/uview-plus/components/u-icon/u-icon.js"))();const t=()=>"../../components/navbar.js",o=e.defineComponent({__name:"index",setup(t){const{appContext:o}=e.getCurrentInstance(),n=o.config.globalProperties;e.index.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});const r=e.reactive({list:[],search_type:"name",search_name:"选择按姓名",search_word:"",pub_picker:!1,pub_value:[],column:[{name:"选择按姓名",value:"name"},{name:"选择按证件号",value:"card_number"},{name:"选择按手机号",value:"mobile"},{name:"选择按合同编号",value:"contract_num"}],page:1,pageSize:10,total:0,status_type:{a:{color:"#FF8177",name:"待提交"},b:{color:"#F97E39",name:"待审核"},c:{color:"#FF8177",name:"待签约"},d:{color:"#FF8177",name:"公证中"},e:{color:"#FF8177",name:"待放款"},g:{color:"#FF8177",name:"流程完结"},f:{color:"#FF8177",name:"转债中"},z:{color:"#FF8177",name:"合同作废"}},tips_pop:!1,tips_flag:!1,contract_num:""});e.onMounted((()=>{p(1)}));const p=a=>{1===a&&(r.page=1),e.index.showLoading({title:"请稍后"}),n.$request("/loan/Order/getOrderList",{currentPage:r.page,perPage:r.pageSize,user_type:e.index.getStorageSync("userInfo").user_type.length>1?"b":"a",status:"b",search_type:r.search_type,search_data:r.search_word}).then((a=>{r.total=a.data.count,1===r.page?r.list=a.data.list:r.list=r.list.concat(a.data.list),e.index.hideLoading()}))},s=e=>{r.pub_value=e.detail.value};return e.onReachBottom((()=>{r.page+1<=Math.ceil(r.total/r.pageSize)&&(r.page++,p(2))})),(t,o)=>e.e({a:e.p({title:"可抢件"}),b:e.t(r.search_name),c:e.p({name:"arrow-down",size:"3vw",color:"#666666"}),d:e.o((e=>r.pub_picker=!0)),e:e.p({name:"search",size:"5vw",color:"#666666"}),f:r.search_word,g:e.o((e=>r.search_word=e.detail.value)),h:e.o((e=>p(1))),i:e.f(r.list,((a,o,s)=>({a:e.t(a.name),b:e.t("person"===a.type?t.$cardUtil(a.card_number):""),c:e.o((e=>{return t=a.id,o=a.contract_num,r.contract_num=o,void n.$request("/loan/Order/hasOrder",{order_id:t}).then((e=>{1===e.data.business_code&&(r.tips_flag=!0),r.tips_pop=!0,p(1)}));var t,o}),o),d:e.t(a.goods_name),e:e.t(a.contract_num),f:e.t(a.create_time),g:o,h:e.o((t=>(a=>{let t="person"===a.type?1:2;e.index.navigateTo({url:"/mine_packages/order_detail/index?id="+a.id+"&type="+t+"&goods_name="+a.goods_name})})(a)),o)}))),j:0===r.list.length},0===r.list.length?{k:a._imports_0$5}:{},{l:r.pub_picker},r.pub_picker?{m:e.o((e=>r.pub_picker=!1)),n:e.o((e=>(r.search_type=r.column[r.pub_value[0]].value,r.search_name=r.column[r.pub_value[0]].name,void(r.pub_picker=!1)))),o:e.f(r.column,((a,t,o)=>({a:e.t(a.name),b:t}))),p:r.pub_value,q:e.o(s)}:{},{r:r.pub_picker},r.pub_picker?{s:e.o((e=>r.pub_picker=!1))}:{},{t:r.tips_pop},r.tips_pop?{v:e.t(r.tips_flag?"抢件成功":"抢件失败"),w:e.o((e=>r.tips_pop=!1)),x:e.p({name:"close",size:"5vw",color:"#666666"}),y:e.p({name:r.tips_flag?"checkmark-circle":"close-circle",size:"50vw",color:r.tips_flag?"#109181":"#FF3030"}),z:e.t(r.contract_num),A:e.o((e=>r.tips_pop=!1))}:{},{B:r.tips_pop},r.tips_pop?{C:e.o((e=>r.tips_pop=!1))}:{})}});wx.createPage(o);
