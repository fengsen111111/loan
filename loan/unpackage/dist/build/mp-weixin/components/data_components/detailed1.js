"use strict";const e=require("../../common/vendor.js");if(!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u-picker"))()}Math||((()=>"../../node-modules/uview-plus/components/u-icon/u-icon.js")+a+(()=>"../../node-modules/uview-plus/components/u-picker/u-picker.js"))();const a=()=>"../option-bt.js",o=e.defineComponent({__name:"detailed1",props:{showFlag:{type:Boolean}},emits:["next"],setup(a,{emit:o}){const r=a,l=e.reactive({tips_popup:!1,tips_timer:null,tipsText:"资料未填写完成",pub_value:[],pub_picker:!1,column:{},pub_name:"",select_value:0,address_title:"",address_show:!1,columns:[],firstIndex:0}),s=o,n=e.ref(null),{appContext:t}=e.getCurrentInstance(),d=t.config.globalProperties,i=e.reactive({card_type:"",card_number:"",leader_name:"",leader_card_type:"",leader_card_number:"",leader_mobile:"",company_city_address:"",company_address:"",company_work_city_address:"",company_work_address:"",company_mobile:""});e.onMounted((()=>{d.$request("/loan/Order/getOrderDetail",{order_id:e.index.getStorageSync("order_id"),page_number:2}).then((e=>{0!==e.data.order_material.length&&Object.assign(i,e.data.order_material)}))}));d.$request("/loan/Dictionary/getDictionary").then((e=>{let a={};e.data.records.map((e=>{a[e.key]={picker_title:e.name,list:e.values.map((e=>({name:e})))}})),l.column=a}));const u=e=>{l.select_value=e.detail.value[0]},p=e=>{l.tipsText=e,l.tips_popup=!0,null!==l.tips_timer&&clearTimeout(l.tips_timer),l.tips_timer=setTimeout((()=>{l.tips_popup=!1}),2e3)};d.$request("/factory_system/Base/getAreas").then((a=>{l.columns=[a.data.areas],e.nextTick$1((()=>{n.value.setColumnValues(1,l.columns[0][0].children),n.value.setColumnValues(2,l.columns[0][0].children[0].children)}))}));const c=e=>{r.showFlag||(l.address_show=!0,l.pub_name=e)},_=()=>{l.address_show=!1},m=e=>{i[l.pub_name]="",e.value.map(((a,o)=>{i[l.pub_name]+=o===e.value.length-1?a.label:a.label+"-"})),_()},b=e=>{const{columnIndex:a,index:o}=e;0===a&&(n.value.setColumnValues(1,l.columns[0][o].children),n.value.setColumnValues(2,l.columns[0][o].children[0].children),l.firstIndex=o),1===a&&n.value.setColumnValues(2,l.columns[0][l.firstIndex].children[o].children)};return(a,o)=>e.e({a:!r.showFlag},(r.showFlag,{}),{b:r.showFlag,c:i.leader_name,d:e.o((e=>i.leader_name=e.detail.value)),e:e.t(i.leader_card_type),f:e.p({name:"arrow-down",size:"5vw",color:"#666666"}),g:e.o((e=>{return a="leader_card_type",void(r.showFlag||(l.pub_name=a,l.pub_picker=!0));var a})),h:r.showFlag,i:i.leader_card_number,j:e.o((e=>i.leader_card_number=e.detail.value)),k:r.showFlag,l:i.leader_mobile,m:e.o((e=>i.leader_mobile=e.detail.value)),n:e.t(i.company_city_address),o:e.p({name:"arrow-down",size:"5vw",color:"#666666"}),p:e.o((e=>c("company_city_address"))),q:r.showFlag,r:i.company_address,s:e.o((e=>i.company_address=e.detail.value)),t:e.t(i.company_work_city_address),v:e.p({name:"arrow-down",size:"5vw",color:"#666666"}),w:e.o((e=>c("company_work_city_address"))),x:r.showFlag,y:i.company_work_address,z:e.o((e=>i.company_work_address=e.detail.value)),A:r.showFlag,B:i.company_mobile,C:e.o((e=>i.company_mobile=e.detail.value)),D:!r.showFlag},(r.showFlag,{}),{E:!r.showFlag},r.showFlag?{}:{F:e.o((a=>{""!==i.leader_name&&""!==i.leader_mobile&&""!==i.leader_card_number?d.$request("/loan/Order/makeOrder",{id:e.index.getStorageSync("order_id"),page_number:2,...i}).then((()=>{s("next")})):p("资料未填写完成")}))},{G:l.tips_popup},l.tips_popup?{H:e.t(l.tipsText)}:{},{I:e.sr(n,"93928fee-4",{k:"uPickerRef"}),J:e.o(m),K:e.o(b),L:e.o((e=>_())),M:e.o((e=>_())),N:e.p({show:l.address_show,title:l.address_title,columns:l.columns,keyName:"label",closeOnClickOverlay:!0}),O:l.pub_picker},l.pub_picker?{P:e.o((e=>l.pub_picker=!1)),Q:e.t(l.column[l.pub_name].picker_title),R:e.o((e=>(i[l.pub_name]=l.column[l.pub_name].list[l.select_value].name,l.select_value=0,void(l.pub_picker=!1)))),S:e.f(l.column[l.pub_name].list,((a,o,r)=>({a:e.t(a.name),b:o}))),T:l.pub_value,U:e.o(u)}:{},{V:l.pub_picker},l.pub_picker?{W:e.o((e=>l.pub_picker=!1))}:{})}});wx.createComponent(o);
