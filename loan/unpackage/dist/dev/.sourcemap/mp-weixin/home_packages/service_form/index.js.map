{"version":3,"file":"index.js","sources":["home_packages/service_form/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/aG9tZV9wYWNrYWdlc1xzZXJ2aWNlX2Zvcm1caW5kZXgudnVl"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<navbar title=\"数据服务授权\"></navbar>\n\t\t<view class=\"content\">\n\t\t\t<view class=\"label\">核实信息</view>\n\t\t\t<view class=\"idcard\">\n\t\t\t\t<view class=\"item\" @click=\"uploadImg('front')\">\n\t\t\t\t\t点击上传身份证正面\n\t\t\t\t\t<text>（人像）</text>\n\t\t\t\t\t<image :src=\"formData.id_card_image_front\" mode=\"\" v-if=\"formData.id_card_image_front\"></image>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"item\" @click=\"uploadImg('back')\">\n\t\t\t\t\t点击上传身份证背面\n\t\t\t\t\t<text>（国徽）</text>\n\t\t\t\t\t<image :src=\"formData.id_card_image_back\" mode=\"\" v-if=\"formData.id_card_image_back\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"info_item\">\n\t\t\t\t<view class=\"label\">姓名</view>\n\t\t\t\t<view class=\"value\">\n\t\t\t\t\t<input type=\"text\" v-model=\"formData.name\" placeholder=\"请输入姓名\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"info_item\">\n\t\t\t\t<view class=\"label\">身份证号码</view>\n\t\t\t\t<view class=\"value\">\n\t\t\t\t\t<input type=\"idcard\" v-model=\"formData.id_card\" placeholder=\"请输入身份证号\" style=\"width: 100%;\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"info_item\">\n\t\t\t\t<view class=\"label\">手机号</view>\n\t\t\t\t<view class=\"value\">\n\t\t\t\t\t<input type=\"number\" placeholder=\"请输入手机号\" v-model=\"formData.auth_mobile\" max-length=\"11\" />\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<!-- <view class=\"info_item\">\n\t\t\t\t<view class=\"label\">验证码</view>\n\t\t\t\t<view class=\"value\">\n\t\t\t\t\t<input type=\"number\" placeholder=\"请输入验证码\" v-model=\"formData.verify_code\" @input=\"verify()\" />\n\t\t\t\t\t<view class=\"getCode\" @click=\"sendCode()\"\n\t\t\t\t\t\t:style=\"{color:state.codeTimer?'#999999':'',border:state.codeTimer?'solid 1px #999999':''}\">\n\t\t\t\t\t\t{{state.codeText}}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view> -->\n\t\t</view>\n\t\t<optionBt @confirm=\"nextStep()\" showCancel cancelText=\"返回\" cancelColor=\"#999999\" cancelBgColor=\"#F6F7FB\"\n\t\t\t@cancel=\"$back()\">\n\t\t</optionBt>\n\t\t<view class=\"tips_popup\" v-if=\"state.tips_popup\">{{state.tipsText}}</view>\n\t</view>\n</template>\n<!--创建时间：2024-04-01 10:40:37-->\n<script setup lang=\"ts\">\n\timport navbar from \"@/components/navbar.vue\"\n\timport optionBt from \"@/components/option-bt.vue\"\n\timport { reactive, getCurrentInstance } from \"vue\"\n\timport { Result } from \"@/utils/interface\"\n\timport { navigateTo } from \"@/utils/jump\";\n\n\tconst { appContext } = getCurrentInstance();\n\tconst globalProxy = appContext.config.globalProperties;\n\tuni.showShareMenu({\n\t\twithShareTicket: true,\n\t\tmenus: ['shareAppMessage', 'shareTimeline']\n\t})\n\n\tconst state = reactive({\n\t\ttimeNum: 59,\n\t\tcodeTimer: null,\n\t\tcodeText: \"发送验证码\",\n\t\ttips_popup: false,\n\t\ttips_timer: null,\n\t\ttipsText: \"资料未填写完成\",\n\t\tverifyFlag: true\n\t})\n\tconst formData = reactive({\n\t\tverify_code: \"\",\n\t\tauth_mobile: \"\",\n\t\tname: \"\",\n\t\tid_card: \"\",\n\t\tid_card_image_front: \"\",\n\t\tid_card_image_back: \"\"\n\t})\n\tconst nextStep = () => {\n\t\t// if (!state.verifyFlag || formData.verify_code.length < 6) {\n\t\t// \topenTips(\"验证码校验不通过\");\n\t\t// \tformData.verify_code = \"\";\n\t\t// \treturn;\n\t\t// }\n\t\t// if (formData.auth_mobile === \"\" || formData.id_card === \"\" || formData.name === \"\" || formData.verify_code === \"\") {\n\t\tif (formData.auth_mobile === \"\" || formData.id_card === \"\" || formData.name === \"\") {\n\t\t\topenTips(\"资料未填写完成\");\n\t\t\treturn;\n\t\t}\n\t\tnavigateTo(\"/home_packages/service_sign/index\", formData)\n\t}\n\n\tconst verify = () => {\n\t\tif (formData.verify_code.length >= 6) {\n\t\t\tglobalProxy.$request(\"/loan/Setting/checkVerifyCode\", {\n\t\t\t\tmobile: formData.auth_mobile,\n\t\t\t\tcode: formData.verify_code\n\t\t\t}).then((res : Result) => {\n\t\t\t\tif (res.data.result === 1) {\n\t\t\t\t\tstate.verifyFlag = true;\n\t\t\t\t} else {\n\t\t\t\t\tstate.verifyFlag = false;\n\t\t\t\t\topenTips(res.data.message);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\t// const sendCode = async () => {\n\t// \tif (formData.auth_mobile === \"\") {\n\t// \t\topenTips(\"请输入手机号\");\n\t// \t\treturn;\n\t// \t}\n\t// \tif (state.codeTimer !== null) return;\n\n\t// \tawait globalProxy.$request(\"/loan/Setting/getVerifyCode\", { mobile: formData.auth_mobile });\n\t// \t// formData.verify_code = res.data.code;\n\n\t// \tstate.codeText = state.timeNum + \"s后重发\";\n\t// \tstate.codeTimer = setInterval(() => {\n\t// \t\tif (state.timeNum > 1) {\n\t// \t\t\tstate.timeNum--;\n\t// \t\t\tstate.codeText = state.timeNum + \"s后重发\";\n\t// \t\t} else {\n\t// \t\t\tclearInterval(state.codeTimer);\n\t// \t\t\tstate.codeTimer = null;\n\t// \t\t\tstate.codeText = \"重新发送\";\n\t// \t\t\tstate.timeNum = 59;\n\t// \t\t}\n\t// \t}, 1000)\n\t// }\n\tconst openTips = (text : string) => {\n\t\tstate.tipsText = text;\n\t\tstate.tips_popup = true;\n\t\tif (state.tips_timer !== null) {\n\t\t\tclearTimeout(state.tips_timer);\n\t\t}\n\t\tstate.tips_timer = setTimeout(() => {\n\t\t\tstate.tips_popup = false;\n\t\t}, 2000)\n\t}\n\tconst uploadImg = (type : string) => {\n\t\tuni.chooseImage({\n\t\t\tcount: 1,\n\t\t\tsuccess: (res : any) => {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: \"上传中，请稍后……\"\n\t\t\t\t})\n\t\t\t\tconst name_array = res.tempFilePaths[0].split(\"/\");\n\t\t\t\tconst name = name_array[name_array.length - 1]\n\t\t\t\tglobalProxy.$request(\"\", {\n\t\t\t\t\tfile: res.tempFiles[0].path,\n\t\t\t\t\tfileType: \"file\",\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tfileSize: parseFloat((res.tempFiles[0].size / 1024).toFixed(2)),\n\t\t\t\t\t\tfileName: name,\n\t\t\t\t\t}\n\t\t\t\t}).then((result : Result) => {\n\t\t\t\t\tif (type === \"front\") {\n\t\t\t\t\t\tformData.id_card_image_front = result.data.url;\n\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\turl: \"https://cardnumber.market.alicloudapi.com/rest/160601/ocr/ocr_idcard.json\",\n\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\"Authorization\": \"APPCODE 5076c8ae1e57459986eb77b688d5d91d\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\timage: result.data.url,\n\t\t\t\t\t\t\t\tconfigure: {\n\t\t\t\t\t\t\t\t\tside: \"face\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tsuccess: (scan : any) => {\n\t\t\t\t\t\t\t\tlet scanData = scan.data;\n\t\t\t\t\t\t\t\tformData.name = scanData.name;\n\t\t\t\t\t\t\t\tformData.id_card = scanData.num\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t\t\topenTips(\"请按要求上传身份证人像面（正面）\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tformData.id_card_image_back = result.data.url;\n\t\t\t\t\t}\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n</script>\n<style lang='scss'>\n\t.container {\n\t\tmin-height: 100vh;\n\t\tbackground: #F6F7FB;\n\n\t\t.tips_popup {\n\t\t\tposition: fixed;\n\t\t\tbottom: 12vh;\n\t\t\tleft: 50%;\n\t\t\ttransform: translateX(-50%);\n\t\t\twidth: 54.13vw;\n\t\t\theight: 8vw;\n\t\t\tbackground: rgba(102, 102, 102, .8);\n\t\t\tborder-radius: 1.33vw;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tfont-weight: bold;\n\t\t\tfont-size: 3.47vw;\n\t\t\tcolor: #FFFFFF;\n\t\t}\n\n\t\t>.content {\n\t\t\tpadding: 4vw;\n\t\t\tbackground: #FFFFFF;\n\n\t\t\t>.idcard {\n\t\t\t\tmargin: 4vw 0;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: space-between;\n\n\t\t\t\t>.item {\n\t\t\t\t\twidth: 40.8vw;\n\t\t\t\t\theight: 22.93vw;\n\t\t\t\t\tborder-radius: 1.33vw;\n\t\t\t\t\tborder: 1px dotted #999999;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tfont-size: 3.2vw;\n\t\t\t\t\tcolor: #999999;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\n\t\t\t\t\t>image {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t>.label {\n\t\t\t\tfont-weight: bold;\n\t\t\t\tfont-size: 3.73vw;\n\t\t\t\tcolor: #333333;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 4vw;\n\n\t\t\t\t&::before {\n\t\t\t\t\tcontent: \"\";\n\t\t\t\t\twidth: 1.07vw;\n\t\t\t\t\theight: 5.33vw;\n\t\t\t\t\tbackground: #F97E39;\n\t\t\t\t\tborder-radius: 1.33vw;\n\t\t\t\t\tmargin-right: 1.47vw;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t>.info_item {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: flex-start;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tmargin-bottom: 8.4vw;\n\n\t\t\t\t&:last-child {\n\t\t\t\t\tmargin-bottom: 0;\n\t\t\t\t}\n\n\t\t\t\t>.value {\n\t\t\t\t\twidth: 66.67vw;\n\t\t\t\t\tfont-size: 3.2vw;\n\t\t\t\t\tcolor: #333333;\n\t\t\t\t\tpadding-bottom: 2.8vw;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tborder-bottom: solid 1px #666666;\n\n\t\t\t\t\t>.getCode {\n\t\t\t\t\t\twidth: 23.2vw;\n\t\t\t\t\t\theight: 5.33vw;\n\t\t\t\t\t\tborder-radius: 1.33vw;\n\t\t\t\t\t\tborder: 1px solid #F97E39;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\tfont-size: 3.2vw;\n\t\t\t\t\t\tcolor: #F97E39;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t>.label {\n\t\t\t\t\tfont-size: 3.2vw;\n\t\t\t\t\tcolor: #333333;\n\n\t\t\t\t\t&:before {\n\t\t\t\t\t\tcontent: \"*\";\n\t\t\t\t\t\tfont-size: 3.2vw;\n\t\t\t\t\t\tcolor: #FF8177;\n\t\t\t\t\t\tmargin-right: 1.6vw;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>","import MiniProgramPage from 'F:/ProjectsCode/loan/home_packages/service_form/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","uni","reactive","navigateTo","MiniProgramPage"],"mappings":";;;;;;AAsDC,MAAA,SAAmB,MAAA;AACnB,MAAA,WAAqB,MAAA;;;;AAKf,UAAA,EAAE,eAAeA,cAAAA;AACjB,UAAA,cAAc,WAAW,OAAO;AACtCC,kBAAAA,MAAI,cAAc;AAAA,MACjB,iBAAiB;AAAA,MACjB,OAAO,CAAC,mBAAmB,eAAe;AAAA,IAAA,CAC1C;AAED,UAAM,QAAQC,cAAAA,SAAS;AAAA,MACtB,SAAS;AAAA,MACT,WAAW;AAAA,MACX,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,YAAY;AAAA,IAAA,CACZ;AACD,UAAM,WAAWA,cAAAA,SAAS;AAAA,MACzB,aAAa;AAAA,MACb,aAAa;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA,MACT,qBAAqB;AAAA,MACrB,oBAAoB;AAAA,IAAA,CACpB;AACD,UAAM,WAAW,MAAM;AAOlB,UAAA,SAAS,gBAAgB,MAAM,SAAS,YAAY,MAAM,SAAS,SAAS,IAAI;AACnF,iBAAS,SAAS;AAClB;AAAA,MACD;AACAC,4BAAW,qCAAqC,QAAQ;AAAA,IAAA;AA0CnD,UAAA,WAAW,CAAC,SAAkB;AACnC,YAAM,WAAW;AACjB,YAAM,aAAa;AACf,UAAA,MAAM,eAAe,MAAM;AAC9B,qBAAa,MAAM,UAAU;AAAA,MAC9B;AACM,YAAA,aAAa,WAAW,MAAM;AACnC,cAAM,aAAa;AAAA,SACjB,GAAI;AAAA,IAAA;AAEF,UAAA,YAAY,CAAC,SAAkB;AACpCF,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,QACP,SAAS,CAAC,QAAc;AACvBA,wBAAAA,MAAI,YAAY;AAAA,YACf,OAAO;AAAA,UAAA,CACP;AACD,gBAAM,aAAa,IAAI,cAAc,CAAC,EAAE,MAAM,GAAG;AACjD,gBAAM,OAAO,WAAW,WAAW,SAAS,CAAC;AAC7C,sBAAY,SAAS,IAAI;AAAA,YACxB,MAAM,IAAI,UAAU,CAAC,EAAE;AAAA,YACvB,UAAU;AAAA,YACV,QAAQ;AAAA,cACP,UAAU,YAAY,IAAI,UAAU,CAAC,EAAE,OAAO,MAAM,QAAQ,CAAC,CAAC;AAAA,cAC9D,UAAU;AAAA,YACX;AAAA,UAAA,CACA,EAAE,KAAK,CAAC,WAAoB;AAC5B,gBAAI,SAAS,SAAS;AACZ,uBAAA,sBAAsB,OAAO,KAAK;AAC3CA,4BAAAA,MAAI,QAAQ;AAAA,gBACX,KAAK;AAAA,gBACL,QAAQ;AAAA,kBACP,iBAAiB;AAAA,gBAClB;AAAA,gBACA,QAAQ;AAAA,gBACR,MAAM;AAAA,kBACL,OAAO,OAAO,KAAK;AAAA,kBACnB,WAAW;AAAA,oBACV,MAAM;AAAA,kBACP;AAAA,gBACD;AAAA,gBACA,SAAS,CAAC,SAAe;AACxB,sBAAI,WAAW,KAAK;AACpB,2BAAS,OAAO,SAAS;AACzB,2BAAS,UAAU,SAAS;AAAA,gBAC7B;AAAA,gBACA,MAAM,MAAM;AACX,2BAAS,kBAAkB;AAAA,gBAC5B;AAAA,cAAA,CACA;AAAA,YAAA,OACK;AACG,uBAAA,qBAAqB,OAAO,KAAK;AAAA,YAC3C;AACAA,0BAAA,MAAI,YAAY;AAAA,UAAA,CAChB;AAAA,QACF;AAAA,MAAA,CACA;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChMH,GAAG,WAAWG,SAAe;"}