{"version":3,"file":"capture.js","sources":["components/data_components/capture.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RjovUHJvamVjdHNDb2RlL2xvYW4vY29tcG9uZW50cy9kYXRhX2NvbXBvbmVudHMvY2FwdHVyZS52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"capture\">\r\n\t\t<view class=\"head\" v-if=\"!props.showFlag\">\r\n\t\t\t<view class=\"top_dot\">\r\n\t\t\t\t<view class=\"dot finish\"></view>\r\n\t\t\t\t<view class=\"line finish\"></view>\r\n\t\t\t\t<view class=\"dot finish\"></view>\r\n\t\t\t\t<view class=\"line finish\"></view>\r\n\t\t\t\t<view class=\"dot current\"></view>\r\n\t\t\t\t<view class=\"line\"></view>\r\n\t\t\t\t<view class=\"dot\"></view>\r\n\t\t\t\t<view class=\"line\"></view>\r\n\t\t\t\t<view class=\"dot\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bottom_text\">\r\n\t\t\t\t<view class=\"text finish\">基本信息</view>\r\n\t\t\t\t<view class=\"text finish\">……………</view>\r\n\t\t\t\t<view class=\"text current\">采集影像</view>\r\n\t\t\t\t<view class=\"text\">……………</view>\r\n\t\t\t\t<view class=\"text\">信息确认</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"content\">\r\n\t\t\t<view class=\"label\">采集影像</view>\r\n\t\t\t<view class=\"info_item\">\r\n\t\t\t\t<view class=\"label\">产调证明({{formData.house_images.length}}/3)</view>\r\n\t\t\t\t<view class=\"value\">\r\n\t\t\t\t\t<image :src=\"item\" mode=\"\" @click=\"preImg(item)\" v-for=\"(item,index) in formData.house_images\"\r\n\t\t\t\t\t\t:key=\"index\"></image>\r\n\t\t\t\t\t<view class=\"upload\" v-if=\"formData.house_images.length<3&&!props.showFlag\"\r\n\t\t\t\t\t\t@click=\"uploadImg('house_images')\">点击上传</view>\r\n\t\t\t\t\t<view style=\"width: 26.67vw;\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"info_item\">\r\n\t\t\t\t<view class=\"label\">客户合影({{formData.worker_customer_images.length}}/3)</view>\r\n\t\t\t\t<view class=\"value\">\r\n\t\t\t\t\t<image :src=\"item\" mode=\"\" @click=\"preImg(item)\"\r\n\t\t\t\t\t\tv-for=\"(item,index) in formData.worker_customer_images\" :key=\"index\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t\t<view class=\"upload\" v-if=\"formData.worker_customer_images.length<3&&!props.showFlag\"\r\n\t\t\t\t\t\t@click=\"uploadImg('worker_customer_images')\">点击上传</view>\r\n\t\t\t\t\t<view style=\"width: 26.67vw;\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"info_item\">\r\n\t\t\t\t<view class=\"label\">首付款凭证({{formData.house_pay_images.length}}/3)</view>\r\n\t\t\t\t<view class=\"value\">\r\n\t\t\t\t\t<image :src=\"item\" mode=\"\" @click=\"preImg(item)\" v-for=\"(item,index) in formData.house_pay_images\"\r\n\t\t\t\t\t\t:key=\"index\"></image>\r\n\t\t\t\t\t<view class=\"upload\" v-if=\"formData.house_pay_images.length<3&&!props.showFlag\"\r\n\t\t\t\t\t\t@click=\"uploadImg('house_pay_images')\">点击上传</view>\r\n\t\t\t\t\t<view style=\"width: 26.67vw;\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"info_item\">\r\n\t\t\t\t<view class=\"label\">买卖合同({{formData.house_contract_images.length}}/3)</view>\r\n\t\t\t\t<view class=\"value\">\r\n\t\t\t\t\t<image :src=\"item\" mode=\"\" @click=\"preImg(item)\"\r\n\t\t\t\t\t\tv-for=\"(item,index) in formData.house_contract_images\" :key=\"index\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t\t<view class=\"upload\" v-if=\"formData.house_contract_images.length<3&&!props.showFlag\"\r\n\t\t\t\t\t\t@click=\"uploadImg('house_contract_images')\">点击上传</view>\r\n\t\t\t\t\t<view style=\"width: 26.67vw;\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view style=\"height: 20vw;\" v-if=\"!props.showFlag\"></view>\r\n\t\t<optionBt @confirm=\"nextStep()\" v-if=\"!props.showFlag\"></optionBt>\r\n\t\t<view class=\"tips_popup\" v-if=\"state.tips_popup\">{{state.tipsText}}</view>\r\n\t</view>\r\n</template>\r\n<!--创建时间：2024-03-30 15:22:39-->\r\n<script setup lang=\"ts\">\r\n\timport optionBt from \"@/components/option-bt.vue\"\r\n\timport { Result } from \"@/utils/interface\"\r\n\timport { reactive, getCurrentInstance, onMounted } from \"vue\"\r\n\r\n\tconst emits = defineEmits([\"next\"]);\r\n\tconst props = defineProps({\r\n\t\tshowFlag: { type: Boolean }\r\n\t})\r\n\r\n\tconst { appContext } = getCurrentInstance();\r\n\tconst globalProxy = appContext.config.globalProperties;\r\n\r\n\tconst state = reactive({\r\n\t\ttips_popup: false,\r\n\t\ttips_timer: null,\r\n\t\ttipsText: \"资料未填写完成\"\r\n\t})\r\n\r\n\tconst formData = reactive({\r\n\t\thouse_images: [],\r\n\t\tworker_customer_images: [],\r\n\t\thouse_pay_images: [],\r\n\t\thouse_contract_images: []\r\n\t})\r\n\r\n\tonMounted(() => {\r\n\t\tglobalProxy.$request(\"/loan/Order/getOrderDetail\", {\r\n\t\t\torder_id: uni.getStorageSync(\"order_id\"),\r\n\t\t\tpage_number: 8\r\n\t\t}).then((res : Result) => {\r\n\t\t\tif (res.data.order_material.length === 0) return;\r\n\t\t\tObject.assign(formData, res.data.order_material);\r\n\t\t})\r\n\t})\r\n\r\n\tconst preImg = (url : string) => {\r\n\t\t// uni.__f__('log','at components/data_components/capture.vue:112','放大',url); \r\n\t\tuni.previewImage({\r\n\t\t\tcurrent: url,\r\n\t\t\turls: [url]\r\n\t\t})\r\n\t}\r\n\tconst nextStep = () => {\r\n\t\tif (formData.house_images.length === 0 || formData.worker_customer_images.length === 0 || formData.house_pay_images.length === 0 || formData.house_contract_images.length === 0) {\r\n\t\t\topenTips(\"资料未填写完成\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tglobalProxy.$request(\"/loan/Order/makeOrder\", {\r\n\t\t\tid: uni.getStorageSync(\"order_id\"),\r\n\t\t\tpage_number: 8,\r\n\t\t\t...formData\r\n\t\t}).then(() => {\r\n\t\t\temits(\"next\");\r\n\t\t})\r\n\t}\r\n\r\n\tconst openTips = (text : string) => {\r\n\t\tstate.tipsText = text;\r\n\t\tstate.tips_popup = true;\r\n\t\tif (state.tips_timer !== null) {\r\n\t\t\tclearTimeout(state.tips_timer);\r\n\t\t}\r\n\t\tstate.tips_timer = setTimeout(() => {\r\n\t\t\tstate.tips_popup = false;\r\n\t\t}, 2000)\r\n\t}\r\n\tconst uploadImg = (names : string) => {\r\n\t\tuni.chooseImage({\r\n\t\t\tcount: 1,\r\n\t\t\tsuccess: (res : any) => {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: \"上传中，请稍后……\"\r\n\t\t\t\t})\r\n\t\t\t\tconst name_array = res.tempFilePaths[0].split(\"/\");\r\n\t\t\t\tconst name = name_array[name_array.length - 1]\r\n\t\t\t\tglobalProxy.$request(\"\", {\r\n\t\t\t\t\tfile: res.tempFiles[0].path,\r\n\t\t\t\t\tfileType: \"file\",\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tfileSize: parseFloat((res.tempFiles[0].size / 1024).toFixed(2)),\r\n\t\t\t\t\t\tfileName: name,\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((result : Result) => {\r\n\t\t\t\t\tformData[names].push(result.data.url);\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n</script>\r\n<style lang='scss'>\r\n\t.capture {\r\n\t\t.tips_popup {\r\n\t\t\tposition: fixed;\r\n\t\t\tbottom: 12vh;\r\n\t\t\tleft: 50%;\r\n\t\t\ttransform: translateX(-50%);\r\n\t\t\twidth: 54.13vw;\r\n\t\t\theight: 8vw;\r\n\t\t\tbackground: rgba(102, 102, 102, .8);\r\n\t\t\tborder-radius: 1.33vw;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: center;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tfont-size: 3.47vw;\r\n\t\t\tcolor: #FFFFFF;\r\n\t\t}\r\n\r\n\t\t>.content {\r\n\t\t\tpadding: 4vw;\r\n\t\t\tbackground: #FFFFFF;\r\n\r\n\t\t\t>.info_item {\r\n\t\t\t\tmargin-bottom: 5.6vw;\r\n\r\n\t\t\t\t>.value {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tfont-size: 3.2vw;\r\n\t\t\t\t\tcolor: #333333;\r\n\t\t\t\t\tpadding-top: 2.8vw;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t\t>image {\r\n\t\t\t\t\t\twidth: 26.67vw;\r\n\t\t\t\t\t\theight: 22.67vw;\r\n\t\t\t\t\t\tborder-radius: 1.33vw;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t>.upload {\r\n\t\t\t\t\t\twidth: 26.67vw;\r\n\t\t\t\t\t\theight: 22.67vw;\r\n\t\t\t\t\t\tborder-radius: 1.33vw;\r\n\t\t\t\t\t\tborder: 1px dotted #999999;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\tfont-size: 3.2vw;\r\n\t\t\t\t\t\tcolor: #999999;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t>.getCode {\r\n\t\t\t\t\t\twidth: 23.2vw;\r\n\t\t\t\t\t\theight: 5.33vw;\r\n\t\t\t\t\t\tborder-radius: 1.33vw;\r\n\t\t\t\t\t\tborder: 1px solid #F97E39;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\tfont-size: 3.2vw;\r\n\t\t\t\t\t\tcolor: #F97E39;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t>.label {\r\n\t\t\t\t\tfont-size: 3.2vw;\r\n\t\t\t\t\tcolor: #333333;\r\n\r\n\t\t\t\t\t&:before {\r\n\t\t\t\t\t\tcontent: \"*\";\r\n\t\t\t\t\t\tfont-size: 3.2vw;\r\n\t\t\t\t\t\tcolor: #FF8177;\r\n\t\t\t\t\t\tmargin-right: 1.6vw;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t>.idcard {\r\n\t\t\t\tmargin: 4vw 0;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t>.item {\r\n\t\t\t\t\twidth: 40.8vw;\r\n\t\t\t\t\theight: 22.93vw;\r\n\t\t\t\t\tborder-radius: 1.33vw;\r\n\t\t\t\t\tborder: 1px dotted #999999;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tfont-size: 3.2vw;\r\n\t\t\t\t\tcolor: #999999;\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t\t>image {\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\t\ttop: 0;\r\n\t\t\t\t\t\tleft: 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t>.label {\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tfont-size: 3.73vw;\r\n\t\t\t\tcolor: #333333;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t&::before {\r\n\t\t\t\t\tcontent: \"\";\r\n\t\t\t\t\twidth: 1.07vw;\r\n\t\t\t\t\theight: 5.33vw;\r\n\t\t\t\t\tbackground: #F97E39;\r\n\t\t\t\t\tborder-radius: 1.33vw;\r\n\t\t\t\t\tmargin-right: 1.47vw;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t>.head {\r\n\t\t\tbackground: #FFFFFF;\r\n\t\t\tmargin: 2.67vw 0;\r\n\t\t\tpadding: 2.67vw 4vw;\r\n\r\n\t\t\t>.top_dot {\r\n\t\t\t\twidth: calc(100% - 8.14vw);\r\n\t\t\t\tpadding: 0 4.07vw;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t>.line {\r\n\t\t\t\t\twidth: 8vw;\r\n\t\t\t\t\theight: 0.53vw;\r\n\t\t\t\t\tbackground: #999999;\r\n\t\t\t\t\tborder-radius: 1.33vw;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t>.dot {\r\n\t\t\t\t\twidth: 2.67vw;\r\n\t\t\t\t\theight: 2.67vw;\r\n\t\t\t\t\tbackground: #999999;\r\n\t\t\t\t\tborder-radius: 1.33vw;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t>.current {\r\n\t\t\t\t\tbackground: #F97E39;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t>.finish {\r\n\t\t\t\t\tbackground: #109181;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t>.bottom_text {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\tfont-weight: 400;\r\n\t\t\t\tfont-size: 2.67vw;\r\n\t\t\t\tcolor: #999999;\r\n\r\n\t\t\t\t>.current {\r\n\t\t\t\t\tcolor: #F97E39;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t>.finish {\r\n\t\t\t\t\tcolor: #109181;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import Component from 'F:/ProjectsCode/loan/components/data_components/capture.vue'\nwx.createComponent(Component)"],"names":["getCurrentInstance","reactive","onMounted","uni","Component"],"mappings":";;;;;AA2EC,MAAA,WAAqB,MAAA;;;;;;;;AAIrB,UAAM,QAAQ;AACd,UAAM,QAAQ;AAIR,UAAA,EAAE,eAAeA,cAAAA;AACjB,UAAA,cAAc,WAAW,OAAO;AAEtC,UAAM,QAAQC,cAAAA,SAAS;AAAA,MACtB,YAAY;AAAA,MACZ,YAAY;AAAA,MACZ,UAAU;AAAA,IAAA,CACV;AAED,UAAM,WAAWA,cAAAA,SAAS;AAAA,MACzB,cAAc,CAAC;AAAA,MACf,wBAAwB,CAAC;AAAA,MACzB,kBAAkB,CAAC;AAAA,MACnB,uBAAuB,CAAC;AAAA,IAAA,CACxB;AAEDC,kBAAAA,UAAU,MAAM;AACf,kBAAY,SAAS,8BAA8B;AAAA,QAClD,UAAUC,cAAAA,MAAI,eAAe,UAAU;AAAA,QACvC,aAAa;AAAA,MAAA,CACb,EAAE,KAAK,CAAC,QAAiB;AACrB,YAAA,IAAI,KAAK,eAAe,WAAW;AAAG;AAC1C,eAAO,OAAO,UAAU,IAAI,KAAK,cAAc;AAAA,MAAA,CAC/C;AAAA,IAAA,CACD;AAEK,UAAA,SAAS,CAAC,QAAiB;AAEhCA,oBAAAA,MAAI,aAAa;AAAA,QAChB,SAAS;AAAA,QACT,MAAM,CAAC,GAAG;AAAA,MAAA,CACV;AAAA,IAAA;AAEF,UAAM,WAAW,MAAM;AACtB,UAAI,SAAS,aAAa,WAAW,KAAK,SAAS,uBAAuB,WAAW,KAAK,SAAS,iBAAiB,WAAW,KAAK,SAAS,sBAAsB,WAAW,GAAG;AAChL,iBAAS,SAAS;AAClB;AAAA,MACD;AACA,kBAAY,SAAS,yBAAyB;AAAA,QAC7C,IAAIA,cAAAA,MAAI,eAAe,UAAU;AAAA,QACjC,aAAa;AAAA,QACb,GAAG;AAAA,MAAA,CACH,EAAE,KAAK,MAAM;AACb,cAAM,MAAM;AAAA,MAAA,CACZ;AAAA,IAAA;AAGI,UAAA,WAAW,CAAC,SAAkB;AACnC,YAAM,WAAW;AACjB,YAAM,aAAa;AACf,UAAA,MAAM,eAAe,MAAM;AAC9B,qBAAa,MAAM,UAAU;AAAA,MAC9B;AACM,YAAA,aAAa,WAAW,MAAM;AACnC,cAAM,aAAa;AAAA,SACjB,GAAI;AAAA,IAAA;AAEF,UAAA,YAAY,CAAC,UAAmB;AACrCA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,QACP,SAAS,CAAC,QAAc;AACvBA,wBAAAA,MAAI,YAAY;AAAA,YACf,OAAO;AAAA,UAAA,CACP;AACD,gBAAM,aAAa,IAAI,cAAc,CAAC,EAAE,MAAM,GAAG;AACjD,gBAAM,OAAO,WAAW,WAAW,SAAS,CAAC;AAC7C,sBAAY,SAAS,IAAI;AAAA,YACxB,MAAM,IAAI,UAAU,CAAC,EAAE;AAAA,YACvB,UAAU;AAAA,YACV,QAAQ;AAAA,cACP,UAAU,YAAY,IAAI,UAAU,CAAC,EAAE,OAAO,MAAM,QAAQ,CAAC,CAAC;AAAA,cAC9D,UAAU;AAAA,YACX;AAAA,UAAA,CACA,EAAE,KAAK,CAAC,WAAoB;AAC5B,qBAAS,KAAK,EAAE,KAAK,OAAO,KAAK,GAAG;AACpCA,0BAAA,MAAI,YAAY;AAAA,UAAA,CAChB;AAAA,QACF;AAAA,MAAA,CACA;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjKH,GAAG,gBAAgBC,SAAS;"}