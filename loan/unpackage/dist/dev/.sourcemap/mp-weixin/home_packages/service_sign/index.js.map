{"version":3,"file":"index.js","sources":["home_packages/service_sign/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/aG9tZV9wYWNrYWdlc1xzZXJ2aWNlX3NpZ25caW5kZXgudnVl"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<navbar title=\"数据服务授权\"></navbar>\n\t\t<view class=\"content\">\n\t\t\t<view class=\"label\">核实信息</view>\n\t\t\t<view class=\"idcard\">\n\t\t\t\t<view class=\"item\" v-if=\"formData.id_card_image_front\">\n\t\t\t\t\t<image :src=\"formData.id_card_image_front\" mode=\"\"></image>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"item\" v-if=\"formData.id_card_image_back\">\n\t\t\t\t\t<image :src=\"formData.id_card_image_back\" mode=\"\"></image>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"info_item\">\n\t\t\t\t<view class=\"label\">姓名</view>\n\t\t\t\t<view class=\"value\" style=\"border-bottom: none;\">\n\t\t\t\t\t{{formData.name}}\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"info_item\">\n\t\t\t\t<view class=\"label\">身份证号码</view>\n\t\t\t\t<view class=\"value\" style=\"border-bottom: none;\">\n\t\t\t\t\t{{formData.id_card}}\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"info_item\">\n\t\t\t\t<view class=\"label\">手机号</view>\n\t\t\t\t<view class=\"value\" style=\"border-bottom: none;\">\n\t\t\t\t\t{{formData.auth_mobile}}\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<u-checkbox-group v-model=\"state.checked\">\n\t\t\t<view style=\"display: flex;font-size: 3.2vw;color: #333333;padding: 0 6.4vw;margin-bottom: 8vw;\">\n\t\t\t\t<u-checkbox :name=\"1\" shape=\"circle\"></u-checkbox>\n\t\t\t\t<view style=\"flex: 1;\">本人已阅读并理解<text style=\"color: #1592E6;\"\n\t\t\t\t\t\t@click=\"$navigateTo('/pages/rich_text/index',{url:'/loan/Setting/getDigitalAgreeContent',title:'电子签意授权书'})\">《电子签意授权书》</text><text\n\t\t\t\t\t\tstyle=\"color: #1592E6;\"\n\t\t\t\t\t\t@click=\"$navigateTo('/pages/rich_text/index',{url:'/loan/Setting/getUserMessageAuthContent',title:'征信授权书'})\">《征信授权书》</text>并愿意遵守相关规则\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</u-checkbox-group>\n\n\t\t<view class=\"autograph\" @click=\"$navigateTo('/home_packages/autograph/index',{name:formData.name})\">\n\t\t\t点击完成手绘签名\n\t\t\t<image :src=\"formData.auth_sign_image\" mode=\"\" v-if=\"formData.auth_sign_image!==''\"></image>\n\t\t</view>\n\n\t\t<optionBt @confirm=\"nextStep()\" confirmText=\"提交\" confirmBgColor=\"#1592E6\" showCancel cancelText=\"返回\"\n\t\t\tcancelColor=\"#999999\" cancelBgColor=\"#F6F7FB\" @cancel=\"$back()\"></optionBt>\n\n\t\t<view class=\"popup\" v-if=\"state.popup_tips\">\n\t\t\t<view class=\"title\">\n\t\t\t\t<view style=\"width: 5vw;\"></view>\n\t\t\t\t温馨提示\n\t\t\t\t<u-icon name=\"close\" size=\"5vw\" color=\"#666666\" @click=\"state.popup_tips=false\"></u-icon>\n\t\t\t</view>\n\t\t\t<view class=\"text\">确认数据服务授权吗?</view>\n\t\t\t<view class=\"btns\">\n\t\t\t\t<view class=\"cancel\" @click=\"state.popup_tips=false\">取消</view>\n\t\t\t\t<view class=\"confirm\" @click=\"confirm()\">确定</view>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"mask\" v-if=\"state.popup_tips\" @click=\"state.popup_tips=false\"></view>\n\t\t<view class=\"tips_popup\" v-if=\"state.tips_popup\">{{state.tipsText}}</view>\n\t</view>\n</template>\n<!--创建时间：2024-04-01 10:40:37-->\n<script setup lang=\"ts\">\n\timport { onShow } from \"@dcloudio/uni-app\"\n\timport navbar from \"@/components/navbar.vue\"\n\timport { Result } from \"@/utils/interface\"\n\timport optionBt from \"@/components/option-bt.vue\"\n\timport { reactive, getCurrentInstance } from \"vue\";\n\n\tconst { appContext } = getCurrentInstance();\n\tconst globalProxy = appContext.config.globalProperties;\n\tuni.showShareMenu({\n\t\twithShareTicket: true,\n\t\tmenus: ['shareAppMessage', 'shareTimeline']\n\t})\n\n\tconst props = defineProps({\n\t\tverify_code: { type: String },\n\t\tauth_mobile: { type: String },\n\t\tname: { type: String },\n\t\tid_card: { type: String },\n\t\tid_card_image_front: { type: String },\n\t\tid_card_image_back: { type: String },\n\t\tauth_sign_image: { type: String },\n\t})\n\n\tconst state = reactive({\n\t\ttimeNum: 59,\n\t\tcodeTimer: null,\n\t\tcodeText: \"发送验证码\",\n\t\ttips_popup: false,\n\t\ttips_timer: null,\n\t\ttipsText: \"资料未填写完成\",\n\t\tautograph: \"\",\n\t\tchecked: [],\n\t\tpopup_tips: false,\n\t\tflag: true\n\t})\n\n\tconst formData = reactive({\n\t\t...props,\n\t\tauth_sign_image: \"\"\n\t})\n\n\tonShow(() => {\n\t\tif (uni.getStorageSync(\"autograph\") === \"empty\") {\n\t\t\tstate.autograph = \"\";\n\t\t\tuni.removeStorageSync(\"autograph\");\n\t\t\treturn;\n\t\t}\n\t\tif (uni.getStorageSync(\"autograph\")) {\n\t\t\tstate.autograph = uni.getStorageSync(\"autograph\")\n\t\t\tconst name_array = state.autograph.split(\"/\");\n\t\t\tconst name = name_array[name_array.length - 1]\n\t\t\tuni.getFileSystemManager().getFileInfo({\n\t\t\t\tfilePath: state.autograph,\n\t\t\t\tsuccess: (res : any) => {\n\t\t\t\t\tglobalProxy.$request(\"\", {\n\t\t\t\t\t\tfile: state.autograph,\n\t\t\t\t\t\tfileType: \"file\",\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tfileSize: parseFloat((res.size / 1024).toFixed(2)),\n\t\t\t\t\t\t\tfileName: name,\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then((result : Result) => {\n\t\t\t\t\t\tformData.auth_sign_image = result.data.url;\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tuni.removeStorageSync(\"autograph\");\n\t\t}\n\t})\n\n\tconst nextStep = () => {\n\t\tif (state.checked[0] !== 1) {\n\t\t\topenTips(\"请阅读并同意相关授权书\");\n\t\t\treturn;\n\t\t}\n\t\tif (formData.auth_sign_image === \"\") {\n\t\t\topenTips(\"资料未填写完成\");\n\t\t\treturn;\n\t\t}\n\t\tstate.popup_tips = true;\n\t}\n\n\tconst confirm = () => {\n\t\tif (!state.flag) return;\n\t\tstate.popup_tips = false;\n\t\tstate.flag = false;\n\t\tuni.showLoading({\n\t\t\ttitle: \"请稍后\"\n\t\t})\n\t\tglobalProxy.$request(\"/loan/User/authorization\", formData).then(() => {\n\t\t\tuni.hideLoading()\n\t\t\tuni.showToast({\n\t\t\t\ttitle: \"数据服务授权成功\",\n\t\t\t\ticon: \"none\",\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t\tsetTimeout(() => {\n\t\t\t\tstate.flag = true;\n\t\t\t\tuni.switchTab({\n\t\t\t\t\turl: \"/pages/user_home/index\"\n\t\t\t\t})\n\t\t\t}, 2000)\n\n\t\t})\n\t}\n\t// const sendCode = () => {\n\t// \tif (formData.phone === \"\") {\n\t// \t\topenTips(\"请输入手机号\");\n\t// \t\treturn;\n\t// \t}\n\t// \tuni.__f__('log','at home_packages/service_sign/index.vue:181',state.codeTimer);\n\t// \tif (state.codeTimer !== null) return;\n\t// \tstate.codeText = state.timeNum + \"s后重发\";\n\t// \tstate.codeTimer = setInterval(() => {\n\t// \t\tif (state.timeNum > 1) {\n\t// \t\t\tstate.timeNum--;\n\t// \t\t\tstate.codeText = state.timeNum + \"s后重发\";\n\t// \t\t} else {\n\t// \t\t\tclearInterval(state.codeTimer);\n\t// \t\t\tstate.codeTimer = null;\n\t// \t\t\tstate.codeText = \"重新发送\";\n\t// \t\t\tstate.timeNum = 59;\n\t// \t\t}\n\t// \t}, 1000)\n\t// }\n\tconst openTips = (text : string) => {\n\t\tstate.tipsText = text;\n\t\tstate.tips_popup = true;\n\t\tif (state.tips_timer !== null) {\n\t\t\tclearTimeout(state.tips_timer);\n\t\t}\n\t\tstate.tips_timer = setTimeout(() => {\n\t\t\tstate.tips_popup = false;\n\t\t}, 2000)\n\t}\n</script>\n<style lang='scss'>\n\t.container {\n\t\tmin-height: 100vh;\n\t\tbackground: #F6F7FB;\n\n\t\t.tips_popup {\n\t\t\tposition: fixed;\n\t\t\tbottom: 12vh;\n\t\t\tleft: 50%;\n\t\t\ttransform: translateX(-50%);\n\t\t\twidth: 54.13vw;\n\t\t\theight: 8vw;\n\t\t\tbackground: rgba(102, 102, 102, .8);\n\t\t\tborder-radius: 1.33vw;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tfont-weight: bold;\n\t\t\tfont-size: 3.47vw;\n\t\t\tcolor: #FFFFFF;\n\t\t}\n\n\t\t>.mask {\n\t\t\tposition: fixed;\n\t\t\twidth: 100vw;\n\t\t\theight: 100vh;\n\t\t\tbackground: rgba(0, 0, 0, .5);\n\t\t\tleft: 0;\n\t\t\ttop: 0;\n\t\t\tz-index: 98;\n\t\t}\n\n\t\t>.popup {\n\t\t\twidth: 84vw;\n\t\t\tposition: fixed;\n\t\t\ttop: 50%;\n\t\t\tleft: 50%;\n\t\t\ttransform: translate(-50%, -50%);\n\t\t\tbackground: #FFFFFF;\n\t\t\tborder-radius: 1.33vw;\n\t\t\tpadding: 2.67vw 4vw;\n\t\t\tz-index: 99;\n\n\t\t\t>.title {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tfont-size: 4.27vw;\n\t\t\t\tcolor: #333333;\n\t\t\t}\n\n\t\t\t>.text {\n\t\t\t\tmargin: 8vw;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tfont-size: 3.2vw;\n\t\t\t\tcolor: #333333;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\n\t\t\t>.btns {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: space-between;\n\n\t\t\t\t>.cancel {\n\t\t\t\t\twidth: 34.67vw;\n\t\t\t\t\theight: 8vw;\n\t\t\t\t\tbackground: #F6F7FB;\n\t\t\t\t\tborder-radius: 4vw;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tline-height: 8vw;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tfont-size: 3.47vw;\n\t\t\t\t\tcolor: #999999;\n\t\t\t\t}\n\n\t\t\t\t>.confirm {\n\t\t\t\t\twidth: 34.67vw;\n\t\t\t\t\theight: 8vw;\n\t\t\t\t\tbackground: #F97E39;\n\t\t\t\t\tborder-radius: 4vw;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tline-height: 8vw;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tfont-size: 3.47vw;\n\t\t\t\t\tcolor: #FFFFFF;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t>.autograph {\n\t\t\theight: 40vw;\n\t\t\tbackground: #FFFFFF;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tfont-weight: bold;\n\t\t\tfont-size: 4.8vw;\n\t\t\tcolor: #999999;\n\t\t\tposition: relative;\n\n\t\t\t>image {\n\t\t\t\tposition: absolute;\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tleft: 0;\n\t\t\t\ttop: 0;\n\t\t\t\tbackground: #FFFFFF;\n\t\t\t}\n\t\t}\n\n\t\t>.content {\n\t\t\tpadding: 4vw;\n\t\t\tbackground: #FFFFFF;\n\t\t\tmargin-bottom: 4vw;\n\n\t\t\t>.idcard {\n\t\t\t\tmargin: 4vw 0;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: space-between;\n\n\t\t\t\t>.item {\n\t\t\t\t\twidth: 40.8vw;\n\t\t\t\t\theight: 22.93vw;\n\t\t\t\t\tborder-radius: 1.33vw;\n\t\t\t\t\tborder: 1px dotted #999999;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tfont-size: 3.2vw;\n\t\t\t\t\tcolor: #999999;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\n\t\t\t\t\t>image {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t>.label {\n\t\t\t\tfont-weight: bold;\n\t\t\t\tfont-size: 3.73vw;\n\t\t\t\tcolor: #333333;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 4vw;\n\n\t\t\t\t&::before {\n\t\t\t\t\tcontent: \"\";\n\t\t\t\t\twidth: 1.07vw;\n\t\t\t\t\theight: 5.33vw;\n\t\t\t\t\tbackground: #F97E39;\n\t\t\t\t\tborder-radius: 1.33vw;\n\t\t\t\t\tmargin-right: 1.47vw;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t>.info_item {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: flex-start;\n\t\t\t\tjustify-content: space-between;\n\t\t\t\tmargin-bottom: 8.4vw;\n\n\t\t\t\t&:last-child {\n\t\t\t\t\tmargin-bottom: 0;\n\t\t\t\t}\n\n\t\t\t\t>.value {\n\t\t\t\t\twidth: 66.67vw;\n\t\t\t\t\tfont-size: 3.2vw;\n\t\t\t\t\tcolor: #333333;\n\t\t\t\t\tpadding-bottom: 2.8vw;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tborder-bottom: solid 1px #666666;\n\n\t\t\t\t\t>.getCode {\n\t\t\t\t\t\twidth: 23.2vw;\n\t\t\t\t\t\theight: 5.33vw;\n\t\t\t\t\t\tborder-radius: 1.33vw;\n\t\t\t\t\t\tborder: 1px solid #F97E39;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\tfont-size: 3.2vw;\n\t\t\t\t\t\tcolor: #F97E39;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t>.label {\n\t\t\t\t\tfont-size: 3.2vw;\n\t\t\t\t\tcolor: #333333;\n\n\t\t\t\t\t&:before {\n\t\t\t\t\t\tcontent: \"*\";\n\t\t\t\t\t\tfont-size: 3.2vw;\n\t\t\t\t\t\tcolor: #FF8177;\n\t\t\t\t\t\tmargin-right: 1.6vw;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</style>","import MiniProgramPage from 'F:/ProjectsCode/loan/home_packages/service_sign/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["getCurrentInstance","uni","reactive","onShow","MiniProgramPage"],"mappings":"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"}