"use strict";const e=require("../../common/vendor.js");Math||t();const t=()=>"../option-bt.js",s=e.defineComponent({__name:"capture",props:{showFlag:{type:Boolean}},emits:["next"],setup(t,{emit:s}){const o=s,a=t,{appContext:i}=e.getCurrentInstance(),r=i.config.globalProperties,g=e.reactive({tips_popup:!1,tips_timer:null,tipsText:"资料未填写完成"}),n=e.reactive({house_images:[],worker_customer_images:[],house_pay_images:[],house_contract_images:[]});e.onMounted((()=>{r.$request("/loan/Order/getOrderDetail",{order_id:e.index.getStorageSync("order_id"),page_number:8}).then((e=>{0!==e.data.order_material.length&&Object.assign(n,e.data.order_material)}))}));const _=t=>{e.index.previewImage({current:t,urls:[t]})},h=e=>{g.tipsText=e,g.tips_popup=!0,null!==g.tips_timer&&clearTimeout(g.tips_timer),g.tips_timer=setTimeout((()=>{g.tips_popup=!1}),2e3)},m=t=>{e.index.chooseImage({count:1,success:s=>{e.index.showLoading({title:"上传中，请稍后……"});const o=s.tempFilePaths[0].split("/"),a=o[o.length-1];r.$request("",{file:s.tempFiles[0].path,fileType:"file",params:{fileSize:parseFloat((s.tempFiles[0].size/1024).toFixed(2)),fileName:a}}).then((s=>{n[t].push(s.data.url),e.index.hideLoading()}))}})};return(t,s)=>e.e({a:!a.showFlag},(a.showFlag,{}),{b:e.t(n.house_images.length),c:e.f(n.house_images,((t,s,o)=>({a:t,b:e.o((e=>_(t)),s),c:s}))),d:n.house_images.length<3&&!a.showFlag},n.house_images.length<3&&!a.showFlag?{e:e.o((e=>m("house_images")))}:{},{f:e.t(n.worker_customer_images.length),g:e.f(n.worker_customer_images,((t,s,o)=>({a:t,b:e.o((e=>_(t)),s),c:s}))),h:n.worker_customer_images.length<3&&!a.showFlag},n.worker_customer_images.length<3&&!a.showFlag?{i:e.o((e=>m("worker_customer_images")))}:{},{j:e.t(n.house_pay_images.length),k:e.f(n.house_pay_images,((t,s,o)=>({a:t,b:e.o((e=>_(t)),s),c:s}))),l:n.house_pay_images.length<3&&!a.showFlag},n.house_pay_images.length<3&&!a.showFlag?{m:e.o((e=>m("house_pay_images")))}:{},{n:e.t(n.house_contract_images.length),o:e.f(n.house_contract_images,((t,s,o)=>({a:t,b:e.o((e=>_(t)),s),c:s}))),p:n.house_contract_images.length<3&&!a.showFlag},n.house_contract_images.length<3&&!a.showFlag?{q:e.o((e=>m("house_contract_images")))}:{},{r:!a.showFlag},(a.showFlag,{}),{s:!a.showFlag},a.showFlag?{}:{t:e.o((t=>{0!==n.house_images.length&&0!==n.worker_customer_images.length&&0!==n.house_pay_images.length&&0!==n.house_contract_images.length?r.$request("/loan/Order/makeOrder",{id:e.index.getStorageSync("order_id"),page_number:8,...n}).then((()=>{o("next")})):h("资料未填写完成")}))},{v:g.tips_popup},g.tips_popup?{w:e.t(g.tipsText)}:{})}});wx.createComponent(s);
