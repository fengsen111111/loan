{"version":3,"file":"u-read-more.js","sources":["node_modules/uview-plus/components/u-read-more/u-read-more.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RjovUHJvamVjdHNDb2RlL2xvYW4vbm9kZV9tb2R1bGVzL3V2aWV3LXBsdXMvY29tcG9uZW50cy91LXJlYWQtbW9yZS91LXJlYWQtbW9yZS52dWU"],"sourcesContent":["<template>\n\t<view class=\"u-read-more\">\n\t\t<view class=\"u-read-more__content\" :style=\"{\n\t\t\t\theight: isLongContent && status === 'close' ? addUnit(showHeight) : 'auto',\n\t\t\t\ttextIndent: textIndent,\n\t\t\t}\">\n\t\t\t<view class=\"u-read-more__content__inner\" ref=\"u-read-more__content__inner\" :class=\"[elId]\">\n\t\t\t\t<slot></slot>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"u-read-more__toggle\" :style=\"[innerShadowStyle]\" v-if=\"isLongContent\">\n\t\t\t<slot name=\"toggle\">\n\t\t\t\t<view class=\"u-read-more__toggle__text\" @tap=\"toggleReadMore\">\n\t\t\t\t\t<up-text :text=\"status === 'close' ? closeText : openText\" :color=\"color\" :size=\"fontSize\"\n\t\t\t\t\t\t:lineHeight=\"fontSize\" margin=\"0 5px 0 0\"></up-text>\n\t\t\t\t\t<view class=\"u-read-more__toggle__icon\">\n\t\t\t\t\t\t<u-icon :color=\"color\" :size=\"fontSize + 2\"\n\t\t\t\t\t\t\t:name=\"status === 'close' ? 'arrow-down' : 'arrow-up'\"></u-icon>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</slot>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\t// #ifdef APP-NVUE\n\tconst dom = uni.requireNativePlugin('dom')\n\t// #endif\n\timport props from './props';\n\timport mpMixin from '../../libs/mixin/mpMixin';\n\timport mixin from '../../libs/mixin/mixin';\n\timport {\n\t\taddUnit,\n\t\tguid,\n\t\tgetPx,\n\t\tsleep\n\t} from '../../libs/function/index';\n\t/**\n\t * readMore 阅读更多\n\t * @description 该组件一般用于内容较长，预先收起一部分，点击展开全部内容的场景。\n\t * @tutorial https://ijry.github.io/uview-plus/components/readMore.html\n\t * @property {String | Number}\tshowHeight\t内容超出此高度才会显示展开全文按钮，单位px（默认 400 ）\n\t * @property {Boolean}\t\t\ttoggle\t\t展开后是否显示收起按钮（默认 false ）\n\t * @property {String}\t\t\tcloseText\t关闭时的提示文字（默认 '展开阅读全文' ）\n\t * @property {String}\t\t\topenText\t展开时的提示文字（默认 '收起' ）\n\t * @property {String}\t\t\tcolor\t\t提示文字的颜色（默认 '#2979ff' ）\n\t * @property {String | Number}\tfontSize\t提示文字的大小，单位px （默认 14 ）\n\t * @property {Object}\t\t\tshadowStyle\t显示阴影的样式\n\t * @property {String}\t\t\ttextIndent\t段落首行缩进的字符个数 （默认 '2em' ）\n\t * @property {String | Number}\tname\t\t用于在 open 和 close 事件中当作回调参数返回\n\t * @event {Function} open 内容被展开时触发\n\t * @event {Function} close 内容被收起时触发\n\t * @example <u-read-more><rich-text :nodes=\"content\"></rich-text></u-read-more>\n\t */\n\texport default {\n\t\tname: 'u-read-more',\n\t\tmixins: [mpMixin, mixin, props],\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tisLongContent: false, // 是否需要隐藏一部分内容\n\t\t\t\tstatus: 'close', // 当前隐藏与显示的状态，close-收起状态，open-展开状态\n\t\t\t\telId: guid(), // 生成唯一class\n\t\t\t\tcontentHeight: 100, // 内容高度\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\t// 展开后无需阴影，收起时才需要阴影样式\n\t\t\tinnerShadowStyle() {\n\t\t\t\tif (this.status === 'open') return {}\n\t\t\t\telse return this.shadowStyle\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.init()\n\t\t},\n\t\temits: [\"open\", \"close\"],\n\t\tmethods: {\n\t\t\taddUnit,\n\t\t\tasync init() {\n\t\t\t\tthis.getContentHeight().then(height => {\n\t\t\t\t\tthis.contentHeight = height\n\t\t\t\t\t// 判断高度，如果真实内容高度大于占位高度，则显示收起与展开的控制按钮\n\t\t\t\t\tif (height > getPx(this.showHeight)) {\n\t\t\t\t\t\tthis.isLongContent = true\n\t\t\t\t\t\tthis.status = 'close'\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// https://github.com/ijry/uview-plus/issues/270\n\t\t\t\t\t\tthis.isLongContent = false\n\t\t\t\t\t\tthis.status = 'close'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 获取内容的高度\n\t\t\tasync getContentHeight() {\n\t\t\t\t// 延时一定时间再获取节点\n\t\t\t\tawait sleep(30)\n\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\t// #ifndef APP-NVUE\n\t\t\t\t\tthis.$uGetRect('.' + this.elId).then(res => {\n\t\t\t\t\t\tresolve(res.height)\n\t\t\t\t\t})\n\t\t\t\t\t// #endif\n\n\t\t\t\t\t// #ifdef APP-NVUE\n\t\t\t\t\tconst ref = this.$refs['u-read-more__content__inner']\n\t\t\t\t\tdom.getComponentRect(ref, (res) => {\n\t\t\t\t\t\tresolve(res.size.height)\n\t\t\t\t\t})\n\t\t\t\t\t// #endif\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 展开或者收起\n\t\t\ttoggleReadMore() {\n\t\t\t\tthis.status = this.status === 'close' ? 'open' : 'close'\n\t\t\t\t// 如果toggle为false，隐藏\"收起\"部分的内容\n\t\t\t\tif (this.toggle == false) this.isLongContent = false\n\t\t\t\t// 发出打开或者收齐的事件\n\t\t\t\tthis.$emit(this.status, this.name)\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t@import \"../../libs/css/components.scss\";\n\n\t.u-read-more {\n\n\t\t&__content {\n\t\t\toverflow: hidden;\n\t\t\tcolor: $u-content-color;\n\t\t\tfont-size: 15px;\n\t\t\ttext-align: left;\n\t\t}\n\n\t\t&__toggle {\n\t\t\t@include flex;\n\t\t\tjustify-content: center;\n\t\t\tposition: relative;\n\n\t\t\t&__text {\n\t\t\t\t@include flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tmargin-top: 5px;\n\t\t\t}\n\t\t}\n\t}\n</style>","import Component from 'F:/ProjectsCode/loan/node_modules/uview-plus/components/u-read-more/u-read-more.vue'\nwx.createComponent(Component)"],"names":["mpMixin","mixin","props","guid","addUnit","getPx","sleep"],"mappings":";;AAuDC,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EACN,QAAQ,CAACA,cAAAA,SAASC,cAAK,OAAEC,qBAAK;AAAA,EAC9B,OAAO;AACN,WAAO;AAAA,MACN,eAAe;AAAA;AAAA,MACf,QAAQ;AAAA;AAAA,MACR,MAAMC,cAAAA,KAAM;AAAA;AAAA,MACZ,eAAe;AAAA;AAAA,IAChB;AAAA,EACA;AAAA,EACD,UAAU;AAAA;AAAA,IAET,mBAAmB;AAClB,UAAI,KAAK,WAAW;AAAQ,eAAO,CAAC;AAAA;AAC/B,eAAO,KAAK;AAAA,IAClB;AAAA,EACA;AAAA,EACD,UAAU;AACT,SAAK,KAAK;AAAA,EACV;AAAA,EACD,OAAO,CAAC,QAAQ,OAAO;AAAA,EACvB,SAAS;AAAA,IACR,SAAAC,cAAO;AAAA,IACP,MAAM,OAAO;AACZ,WAAK,iBAAgB,EAAG,KAAK,YAAU;AACtC,aAAK,gBAAgB;AAErB,YAAI,SAASC,cAAAA,MAAM,KAAK,UAAU,GAAG;AACpC,eAAK,gBAAgB;AACrB,eAAK,SAAS;AAAA,eACR;AAEN,eAAK,gBAAgB;AACrB,eAAK,SAAS;AAAA,QACf;AAAA,OACA;AAAA,IACD;AAAA;AAAA,IAED,MAAM,mBAAmB;AAExB,YAAMC,cAAAA,MAAM,EAAE;AACd,aAAO,IAAI,QAAQ,aAAW;AAE7B,aAAK,UAAU,MAAM,KAAK,IAAI,EAAE,KAAK,SAAO;AAC3C,kBAAQ,IAAI,MAAM;AAAA,SAClB;AAAA,OASD;AAAA,IACD;AAAA;AAAA,IAED,iBAAiB;AAChB,WAAK,SAAS,KAAK,WAAW,UAAU,SAAS;AAEjD,UAAI,KAAK,UAAU;AAAO,aAAK,gBAAgB;AAE/C,WAAK,MAAM,KAAK,QAAQ,KAAK,IAAI;AAAA,IAClC;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxHD,GAAG,gBAAgB,SAAS;","x_google_ignoreList":[0]}