{"version":3,"file":"index.js","sources":["home_packages/autograph/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/aG9tZV9wYWNrYWdlc1xhdXRvZ3JhcGhcaW5kZXgudnVl"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<view class=\"navbar\" :style=\"{height:state.navigationBarHeight+'px'}\">\n\t\t\t<u-icon name=\"arrow-left\" size=\"5vh\" color=\"#333333\" @click=\"back()\"></u-icon>\n\t\t\t签名板\n\t\t\t<view style=\"width: 5vw;\"></view>\n\t\t</view>\n\n\t\t<view class=\"content\" :style=\"{height:'calc(100vh - '+state.navigationBarHeight+'px - 2vw - 6vh)'}\">\n\t\t\t<view class=\"left\" id=\"signature\">\n\t\t\t\t<text :style=\"{width:props.name.length*40+'vh'}\">{{props.name}}</text>\n\t\t\t\t<canvas canvas-id=\"autograph\" disable-scroll @touchstart=\"starts\" @touchmove=\"moves\"\n\t\t\t\t\t@touchend=\"end\"></canvas>\n\t\t\t</view>\n\t\t\t<view class=\"right\">\n\t\t\t\t<view class=\"tips\">\n\t\t\t\t\t请使用楷体或正楷书写您的姓名\n\t\t\t\t</view>\n\t\t\t\t<view class=\"clear\" @click=\"clear()\">清除</view>\n\t\t\t\t<view class=\"save\" @click=\"save()\">完成</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n<!--创建时间：2024-04-01 11:24:03-->\n<script setup lang=\"ts\">\n\timport { reactive, defineProps, onMounted } from \"vue\"\n\n\tconst state = reactive({\n\t\tnavigationBarHeight: 0,\n\t\tctx: null,\n\t\tpoints: [],\n\t\tclearFlag: false\n\t})\n\tonMounted(() => {\n\t\tuni.getSystemInfo({\n\t\t\tsuccess: () => {\n\t\t\t\t// 获取微信胶囊的位置信息 width,height,top,right,left,bottom\n\t\t\t\tconst custom = uni.getMenuButtonBoundingClientRect()\n\t\t\t\t// 导航栏高度(标题栏高度) = 胶囊高度 + (顶部距离 - 状态栏高度) * 2\n\t\t\t\tstate.navigationBarHeight = custom.height + (custom.top * 2)\n\t\t\t}\n\t\t})\n\t})\n\n\n\tstate.ctx = uni.createCanvasContext(\"autograph\", this);\n\tstate.ctx.lineWidth = 8;\n\tstate.ctx.lineCap = \"round\";\n\tstate.ctx.lineJoin = \"round\"\n\n\tconst starts = (e : any) => {\n\t\tlet startX = e.changedTouches[0].x;\n\t\tlet startY = e.changedTouches[0].y;\n\t\tlet startPoint = { X: startX, Y: startY };\n\t\tstate.points.push(startPoint);\n\t\tstate.ctx.beginPath();\n\t}\n\n\tconst moves = (e : any) => {\n\t\tlet moveX = e.changedTouches[0].x;\n\t\tlet moveY = e.changedTouches[0].y;\n\t\tlet movePoint = { X: moveX, Y: moveY };\n\t\tstate.points.push(movePoint);       //存点\n\t\tlet len = state.points.length;\n\t\tif (len >= 2) {\n\t\t\tdraw();                   //绘制路径\n\t\t}\n\t}\n\n\tconst end = () => {\n\t\tstate.points = [];\n\t\tstate.clearFlag = false\n\t}\n\n\tconst save = () => {\n\t\tuni.canvasToTempFilePath({\n\t\t\tcanvasId: \"autograph\",\n\t\t\tsuccess: (res : any) => {\n\t\t\t\tif (state.clearFlag) {\n\t\t\t\t\tuni.setStorageSync(\"autograph\", \"empty\");\n\t\t\t\t\tback();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tuni.setStorageSync(\"autograph\", res.tempFilePath);\n\t\t\t\tback()\n\t\t\t}\n\t\t})\n\t}\n\n\tconst draw = () => {\n\t\tlet point1 = state.points[0]\n\t\tlet point2 = state.points[1]\n\t\tstate.points.shift()\n\t\tstate.ctx.moveTo(point1.X, point1.Y)\n\t\tstate.ctx.lineTo(point2.X, point2.Y)\n\t\tstate.ctx.stroke()\n\t\tstate.ctx.draw(true)\n\t}\n\n\tconst clear = () => {\n\t\tstate.clearFlag = true;\n\t\tuni.createSelectorQuery().select(\"#signature\").boundingClientRect((res : any) => {\n\t\t\tstate.ctx.clearRect(0, 0, res.width, res.height);\n\t\t\tstate.ctx.draw(true);\n\t\t}).exec()\n\t}\n\n\tconst props = defineProps({\n\t\tname: {\n\t\t\ttype: String\n\t\t}\n\t})\n\n\tconst back = () => {\n\t\tuni.navigateBack({\n\t\t\tfail: () => {\n\t\t\t\tuni.__f__('log','at home_packages/autograph/index.vue:118',\"返回首页\")\n\t\t\t\tuni.switchTab({\n\t\t\t\t\turl: \"/pages/home/index\"\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n</script>\n<style lang='scss'>\n\t.container {\n\t\tmin-height: 100vh;\n\t\tbackground: #F6F7FB;\n\n\t\t>.content {\n\t\t\tpadding: 1vw 2vw 1vw 5vw;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-between;\n\t\t\tbackground: #FFFFFF;\n\t\t\tborder-radius: 1.33vh;\n\t\t\tmargin: 2.67vh;\n\n\t\t\t>.left {\n\t\t\t\theight: 100%;\n\t\t\t\tfont-size: 15vw;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tflex: 1;\n\t\t\t\tposition: relative;\n\t\t\t\tbackground: #e7e7e7;\n\n\t\t\t\t>text {\n\t\t\t\t\ttext-align: justify;\n\t\t\t\t\ttext-align-last: justify;\n\t\t\t\t\tcolor: rgba(153, 153, 153, .4);\n\t\t\t\t}\n\n\t\t\t\t>canvas {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t>.right {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tjustify-content: center;\n\t\t\t\tflex-direction: column;\n\t\t\t\twidth: 20vh;\n\t\t\t\tmargin-left: 20px;\n\n\t\t\t\t>.tips {\n\t\t\t\t\tcolor: #FFC4CC;\n\t\t\t\t\tfont-size: 3.2vh;\n\t\t\t\t}\n\n\t\t\t\t>.clear {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 8vh;\n\t\t\t\t\tbackground: #f4f4f4;\n\t\t\t\t\tcolor: #999999;\n\t\t\t\t\tborder-radius: 4vh;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmargin-top: 20vw;\n\t\t\t\t}\n\n\t\t\t\t>.save {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 8vh;\n\t\t\t\t\tbackground: #F97E39;\n\t\t\t\t\tcolor: #FFFFFF;\n\t\t\t\t\tborder-radius: 4vh;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmargin-top: 4vh;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t>.navbar {\n\t\t\tpadding: 0 4vw;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-between;\n\t\t\tposition: sticky;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t\tbackground: #FFFFFF;\n\t\t\tz-index: 20;\n\t\t}\n\t}\n</style>","import MiniProgramPage from 'F:/ProjectsCode/loan/home_packages/autograph/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","onMounted","uni","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;;;;AA4BC,UAAM,QAAQA,cAAAA,SAAS;AAAA,MACtB,qBAAqB;AAAA,MACrB,KAAK;AAAA,MACL,QAAQ,CAAC;AAAA,MACT,WAAW;AAAA,IAAA,CACX;AACDC,kBAAAA,UAAU,MAAM;AACfC,oBAAAA,MAAI,cAAc;AAAA,QACjB,SAAS,MAAM;AAER,gBAAA,SAASA,oBAAI;AAEnB,gBAAM,sBAAsB,OAAO,SAAU,OAAO,MAAM;AAAA,QAC3D;AAAA,MAAA,CACA;AAAA,IAAA,CACD;AAGD,UAAM,MAAMA,cAAA,MAAI,oBAAoB,aAAa,IAAI;AACrD,UAAM,IAAI,YAAY;AACtB,UAAM,IAAI,UAAU;AACpB,UAAM,IAAI,WAAW;AAEf,UAAA,SAAS,CAAC,MAAY;AAC3B,UAAI,SAAS,EAAE,eAAe,CAAC,EAAE;AACjC,UAAI,SAAS,EAAE,eAAe,CAAC,EAAE;AACjC,UAAI,aAAa,EAAE,GAAG,QAAQ,GAAG,OAAO;AAClC,YAAA,OAAO,KAAK,UAAU;AAC5B,YAAM,IAAI;IAAU;AAGf,UAAA,QAAQ,CAAC,MAAY;AAC1B,UAAI,QAAQ,EAAE,eAAe,CAAC,EAAE;AAChC,UAAI,QAAQ,EAAE,eAAe,CAAC,EAAE;AAChC,UAAI,YAAY,EAAE,GAAG,OAAO,GAAG,MAAM;AAC/B,YAAA,OAAO,KAAK,SAAS;AACvB,UAAA,MAAM,MAAM,OAAO;AACvB,UAAI,OAAO,GAAG;AACR;MACN;AAAA,IAAA;AAGD,UAAM,MAAM,MAAM;AACjB,YAAM,SAAS;AACf,YAAM,YAAY;AAAA,IAAA;AAGnB,UAAM,OAAO,MAAM;AAClBA,oBAAAA,MAAI,qBAAqB;AAAA,QACxB,UAAU;AAAA,QACV,SAAS,CAAC,QAAc;AACvB,cAAI,MAAM,WAAW;AAChBA,0BAAAA,MAAA,eAAe,aAAa,OAAO;AAClC;AACL;AAAA,UACD;AACIA,wBAAAA,MAAA,eAAe,aAAa,IAAI,YAAY;AAC3C;QACN;AAAA,MAAA,CACA;AAAA,IAAA;AAGF,UAAM,OAAO,MAAM;AACd,UAAA,SAAS,MAAM,OAAO,CAAC;AACvB,UAAA,SAAS,MAAM,OAAO,CAAC;AAC3B,YAAM,OAAO;AACb,YAAM,IAAI,OAAO,OAAO,GAAG,OAAO,CAAC;AACnC,YAAM,IAAI,OAAO,OAAO,GAAG,OAAO,CAAC;AACnC,YAAM,IAAI;AACJ,YAAA,IAAI,KAAK,IAAI;AAAA,IAAA;AAGpB,UAAM,QAAQ,MAAM;AACnB,YAAM,YAAY;AAClBA,oBAAA,MAAI,sBAAsB,OAAO,YAAY,EAAE,mBAAmB,CAAC,QAAc;AAChF,cAAM,IAAI,UAAU,GAAG,GAAG,IAAI,OAAO,IAAI,MAAM;AACzC,cAAA,IAAI,KAAK,IAAI;AAAA,MAAA,CACnB,EAAE,KAAK;AAAA,IAAA;AAGT,UAAM,QAAQ;AAMd,UAAM,OAAO,MAAM;AAClBA,oBAAAA,MAAI,aAAa;AAAA,QAChB,MAAM,MAAM;AACPA,wBAAAA,MAAA,MAAM,OAAM,4CAA2C,MAAM;AACjEA,wBAAAA,MAAI,UAAU;AAAA,YACb,KAAK;AAAA,UAAA,CACL;AAAA,QACF;AAAA,MAAA,CACA;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;ACzHH,GAAG,WAAWC,SAAe;"}